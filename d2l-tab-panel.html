<link rel="import" href="../polymer/polymer.html">

<!--
`d2l-tab-panel`
Polymer-based web components for tab

@demo demo/index.html
-->

<dom-module id="d2l-tab-panel">

	<template strip-whitespace>
		<style>

			:host {
				box-sizing: border-box;
				display: none;
				margin: 1.2rem 0;
			}

			:host([no-padding]) {
				margin: 0;
			}

			:host([selected]) {
				display: block;
			}

		</style>
		<slot></slot>
	</template>

	<script>
		Polymer({
			is: 'd2l-tab-panel',

			hostAttributes: {
				'role': 'tabpanel'
			},

			properties: {

				/**
				 * Whether to exclude default padding from the panel.
				 */
				noPadding: {
					type: Boolean,
					reflectToAttribute: true
				},

				/**
				 * Indicates the selected tab.
				 */
				selected: {
					type: Boolean,
					observer: '_handleSelected',
					reflectToAttribute: true
				},

				/**
				 * Text for the tab.
				 */
				text: String

			},

			attached: function() {
				this.setAttribute('aria-label', this.text);
				if (this.selected) {
					requestAnimationFrame(function() {
						this._dispatchSelected();
					}.bind(this));
				}
			},

			_dispatchSelected: function() {
				this.dispatchEvent(new CustomEvent(
					'd2l-tab-panel-selected', { bubbles: true, composed: true }
				));
			},

			_handleSelected: function(newValue) {
				if (newValue) {
					this._dispatchSelected();
				}
			}

		});
	</script>

</dom-module>
